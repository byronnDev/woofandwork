<span id="typewriter"></span><span class="cursor">|</span>

<script is:inline lang="module">
  const phrases = [
    "ðŸ¾ Marketing para Mascotas",
    "ðŸ¦® Marketing Pet-Friendly",
    "ðŸ± Contenido Atractivo para Mascotas",
    "ðŸ¶ CampaÃ±as Creativas Pet",
    "ðŸ¦´ Resultados en Marketing Mascotas",
    "ðŸ† Branding para Mascotas",
    "ðŸ’• Amor por el Marketing Pet",
    "ðŸ“± Social Media para Mascotas",
    "ðŸŽ¯ Marketing Veterinario",
    "ðŸŒŸ Impulsa tu Mascota como Marca",
    "ðŸŒˆ Ideas de Marketing Exitosas",
    "ðŸŽ¨ Creatividad en Marketing Pet",
    "ðŸš€ Elevamos tu Marca Pet",
    "âœ¨ Historias de Marketing Pet",
    "ðŸŽ¯ Estrategias Impactantes Pet",
    "ðŸ’« InnovaciÃ³n en Marketing Pet",
    "ðŸŒŸ Brillamos con tu Mascota",
    "ðŸ” Marketing de Impacto Pet",
    "ðŸ’¡ Ideas de Tendencia para Mascotas",
    "ðŸŽ‰ Resultados Extraordinarios Pet"
  ];

  let typeInterval;
  let phraseIndex = Math.floor(Math.random() * phrases.length);
  let charIndex = 0;
  let isDeleting = false;

  const typePhrase = () => {
    const currentPhrase = phrases[phraseIndex];
    const displayedText = isDeleting
      ? currentPhrase.substring(0, charIndex - 1)
      : currentPhrase.substring(0, charIndex + 1);

    typewriter.textContent = displayedText;

    let delay = isDeleting ? 50 : 150;

    if (!isDeleting && charIndex === currentPhrase.length) {
      delay = 1000;
      isDeleting = true;
    } else if (isDeleting && charIndex === 0) {
      isDeleting = false;
      phraseIndex = (phraseIndex + 1) % phrases.length;
      delay = 500;
    }

    isDeleting ? charIndex-- : charIndex++;
    typeInterval = setTimeout(typePhrase, delay);
  };

  const startTyping = () => {
    if (typeInterval) return;
    typePhrase();
  };

  const stopTyping = () => {
    clearTimeout(typeInterval);
    typeInterval = null;
  };

  const initializeObserver = (typewriterElement) => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          startTyping();
        } else {
          stopTyping();
        }
      });
    });

    observer.observe(typewriterElement);
  };

  document.addEventListener('DOMContentLoaded', () => {
    try {
      const typewriter = document.getElementById('typewriter');
      if (!typewriter) return;

      initializeObserver(typewriter);
    } catch (error) {
      console.error(error);
    }
  });
</script>

<style>
  .cursor {
    display: inline-block;
    margin-left: 2px;
    animation: blink 0.75s step-start 0s infinite;
  }

  @keyframes blink {
    50% { opacity: 0; }
  }
</style>